import React from "react";
import Project from "./Project";
import CreateMindMap from "./CreateMindMap";
const getProjects = async (url) => {
    const response = await fetch(
        `${process.env.SERVER_API}/project_mindmap?user_id=${url.replace(
            "|",
            "-"
        )}`,
        {
            cache: "no-cache",
        }
    );

    return await response.json();
};

async function Listmindmap({ sub }) {
    const projects = await getProjects(sub);

    return (
        <div className="listmindmap">
            <div className="navbar">
                <ul>
                    <li className="active">
                        <svg width="100%" height="100%" viewBox="0 0 24 24">
                            <path
                                fill="currentColor"
                                fill-rule="evenodd"
                                d="M6 2a3 3 0 0 1 2.846 3.952A7.765 7.765 0 0 1 11.148 9h1.704a7.774 7.774 0 0 1 2.302-3.049A3 3 0 0 1 18 2h2a3 3 0 0 1 0 6h-2a2.99 2.99 0 0 1-2.022-.784 6.272 6.272 0 0 0-1.626 2.105 3 3 0 0 1 0 5.357 6.252 6.252 0 0 0 1.626 2.106A2.986 2.986 0 0 1 18 16h2a3 3 0 0 1 0 6h-2a3 3 0 0 1-2.846-3.952A7.765 7.765 0 0 1 12.852 15h-1.704a7.774 7.774 0 0 1-2.302 3.048A3 3 0 0 1 6 22H4a3 3 0 0 1 0-6h2c.78 0 1.489.297 2.022.784a6.272 6.272 0 0 0 1.626-2.105 3 3 0 0 1 0-5.357 6.252 6.252 0 0 0-1.626-2.106A2.986 2.986 0 0 1 6 8H4a3 3 0 1 1 0-6zm14 16h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2zM6 18H4a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2zM20 4h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2zM6 4H4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2z"
                            ></path>
                        </svg>
                        My Maps
                    </li>
                    <li>
                        <svg width="100%" height="100%" viewBox="0 0 24 24">
                            <path
                                fill="currentColor"
                                fill-rule="evenodd"
                                d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1zm0 2a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 3a1 1 0 0 1 1 1v4.586l2.707 2.707a1 1 0 0 1-1.414 1.414L11 12.414V7a1 1 0 0 1 1-1z"
                            ></path>
                        </svg>
                        Recents
                    </li>
                    <li>
                        <svg width="100%" height="100%" viewBox="0 0 24 24">
                            <path
                                fill="currentColor"
                                fill-rule="evenodd"
                                d="M10.604 17.474a3 3 0 0 1 2.792 0l3.001 1.578-.573-3.342a3 3 0 0 1 .863-2.655l2.428-2.367-3.356-.487a3 3 0 0 1-2.258-1.641L12 5.52l-1.5 3.04a3 3 0 0 1-2.26 1.64l-3.355.488 2.428 2.367a3 3 0 0 1 .863 2.655l-.573 3.342 3.001-1.578zm.93 1.77l-5.69 2.993a.5.5 0 0 1-.726-.527l1.087-6.338a1 1 0 0 0-.288-.885L1.313 10a.5.5 0 0 1 .277-.853l6.363-.925a1 1 0 0 0 .753-.547l2.846-5.766a.5.5 0 0 1 .896 0l2.846 5.766a1 1 0 0 0 .753.547l6.363.925a.5.5 0 0 1 .277.853l-4.604 4.488a1 1 0 0 0-.288.885l1.087 6.338a.5.5 0 0 1-.725.527l-5.692-2.992a1 1 0 0 0-.93 0z"
                            ></path>
                        </svg>
                        Favorites
                    </li>
                    <li>
                        <svg width="100%" height="100%" viewBox="0 0 24 24">
                            <path
                                fill="currentColor"
                                fill-rule="evenodd"
                                d="M12 1c3.302 0 6.265 1.455 8.281 3.76l-.234-.26a11.097 11.097 0 0 1 1.238 1.599l.074.118A10.949 10.949 0 0 1 23 12a10.95 10.95 0 0 1-2.716 7.238A10.974 10.974 0 0 1 12 23a10.983 10.983 0 0 1-9.285-5.099l-.074-.118A10.949 10.949 0 0 1 1 12a10.95 10.95 0 0 1 2.717-7.238A10.974 10.974 0 0 1 12 1zm0 15c-.891 0-1.758.106-2.588.306C9.977 19.116 11.032 21 12 21c.967 0 2.023-1.884 2.588-4.693A10.987 10.987 0 0 0 12 16zm-4.505.962l-.246.114c-.638.306-1.243.672-1.805 1.09a9.028 9.028 0 0 0 3.211 2.192c-.488-.942-.88-2.096-1.16-3.396zm9.01 0l-.046.21c-.276 1.215-.652 2.295-1.114 3.186a9.023 9.023 0 0 0 3.21-2.192 10.974 10.974 0 0 0-2.05-1.204zM4.243 7.433l-.097.168A8.96 8.96 0 0 0 3 12c0 1.667.453 3.229 1.244 4.568a12.926 12.926 0 0 1 2.92-1.639A25.59 25.59 0 0 1 7 12c0-1.013.056-1.996.164-2.931a12.909 12.909 0 0 1-2.92-1.636zm15.513-.001l-.194.144a12.974 12.974 0 0 1-2.726 1.495c.108.933.164 1.916.164 2.929s-.056 1.996-.164 2.931c1.048.418 2.028.971 2.92 1.636A8.954 8.954 0 0 0 21 12a8.958 8.958 0 0 0-1.244-4.568zm-4.872 2.245l-.264.059c-.846.173-1.723.264-2.62.264-.99 0-1.956-.11-2.883-.32a23.16 23.16 0 0 0 0 4.643 12.996 12.996 0 0 1 2.883-.323c.99 0 1.956.11 2.883.32a23.159 23.159 0 0 0 0-4.644zM12 3l-.09.005c-.942.112-1.95 1.966-2.498 4.688.83.201 1.697.307 2.588.307s1.758-.106 2.587-.306C14.023 4.884 12.967 3 12 3zm-3.345.642l-.158.065a9.019 9.019 0 0 0-3.052 2.126c.633.472 1.32.877 2.05 1.205.28-1.3.672-2.454 1.16-3.396zm6.69 0l.037.072c.47.928.85 2.056 1.123 3.324.73-.328 1.417-.733 2.051-1.204a9.024 9.024 0 0 0-3.211-2.192z"
                            ></path>
                        </svg>
                        Public
                    </li>
                </ul>
            </div>

            <div className="workspace">
                <h2 className="heading">My Maps</h2>
                <div className="flex">
                    <div className="projects">
                        <CreateMindMap sub={sub} />
                        {projects.map((project) => {
                            return (
                                <Project
                                    sub={sub}
                                    key={project.id}
                                    project={project}
                                />
                            );
                        })}
                    </div>
                </div>
            </div>
        </div>
    );
}

export default Listmindmap;
